// 1. We want specific typography for nested items in the Navigation component.
// 2. In the vertical Navigation component, the stripe is placed outside the NavigationAction element,
//    so we need to disable pointer events on it.
// 3. We want the selected and expanded states to override the hover and active states.

@use '../../tools/reset';
@use '../../tools/typography';
@use 'theme';

.NavigationAction:where(button) {
    @include reset.button();
}

.NavigationAction {
    position: relative;
    display: flex;
    gap: theme.$action-gap;
    align-items: center;
    color: theme.$action-color-state-default;
    background-color: theme.$action-background-color-state-default;

    &::after {
        content: '';
        position: absolute;
        background-color: theme.$action-stripe-background-color-state-default;
    }

    @media (hover: hover) {
        &:hover {
            text-decoration: none;
            color: theme.$action-color-state-hover;
            background-color: theme.$action-background-color-state-hover;
        }
    }

    &:active {
        text-decoration: none;
        color: theme.$action-color-state-active;
        background-color: theme.$action-background-color-state-active;
    }
}

// stylelint-disable-next-line selector-max-compound-selectors, selector-max-specificity -- 1.
.Navigation--vertical
    > ul
    ul
    .NavigationAction:not(:is(.NavigationAction--selected, .NavigationAction[aria-expanded='true'])) {
    @include typography.generate(theme.$vertical-action-typography-nested);
}

.NavigationAction--selected,
.NavigationAction[aria-expanded='true'] {
    color: theme.$action-color-state-selected;
    background-color: theme.$action-background-color-state-selected;

    &::after {
        background-color: theme.$action-stripe-background-color-selected-state-default;
    }
}

.NavigationAction--disabled {
    color: theme.$action-color-state-disabled;
    pointer-events: none;
}

.Navigation--horizontal .NavigationAction {
    @include typography.generate(theme.$horizontal-action-typography);

    justify-content: center;
    padding-inline: theme.$action-spacing-dense;

    &::after {
        inset-inline: 0;
        bottom: 0;
        height: theme.$horizontal-action-stripe-size;
    }
}

.Navigation--vertical .NavigationAction {
    @include typography.generate(theme.$vertical-action-typography);

    justify-content: space-between;
    padding-inline: theme.$action-spacing;
    padding-block: theme.$action-spacing-dense;
    border-radius: theme.$vertical-action-border-radius;

    &::after {
        inset-block: 0;
        left: calc(-1 * #{theme.$spacing});
        width: theme.$vertical-action-stripe-size;
        pointer-events: none; // 2.
    }
}

@media (hover: hover) {
    .Navigation--horizontal .NavigationAction:hover::after {
        background-color: theme.$horizontal-action-stripe-background-color-state-hover;
    }
}

.Navigation--horizontal .NavigationAction:active::after {
    background-color: theme.$horizontal-action-stripe-background-color-state-active;
}

// stylelint-disable selector-max-specificity -- 3.
.Navigation--horizontal .NavigationAction--selected,
.Navigation--horizontal .NavigationAction[aria-expanded='true'] {
    @media (hover: hover) {
        &:hover::after {
            background-color: theme.$action-stripe-background-color-selected-state-hover;
        }
    }

    &:active::after {
        background-color: theme.$action-stripe-background-color-selected-state-active;
    }
}
// stylelint-enable selector-max-specificity
