{# API #}
{% set props = props | default({}) %}
{% set class_name = props.class | default('mb-800') %}
{% set element_type = props.elementType | default('nav') %}
{% set default_page = props.defaultPage | default(1) %}
{% set total_pages = props.totalPages | default(5) %}
{% set current_page = default_page < 1 or default_page > total_pages ? 1 : default_page %}
{% set chapter_size = 5 %}

{% set half_chap = chapter_size // 2 %}
{% set start_page = max(1, current_page - half_chap) %}
{% set end_page = min(start_page + chapter_size - 1, total_pages) %}

{% if total_pages - chapter_size < start_page - 1 %}
	{% set tmp_start_page = total_pages - chapter_size + 1 %}
	{% set start_page = tmp_start_page < 1 ? 1 : tmp_start_page %}
{% endif %}

{% set root_class_name = 'Pagination' %}

{% set class_names = [root_class_name] %}
{% if class_name %}
	{% set _ = class_names.append(class_name) %}
{% endif %}

<{{element_type}} {{ main_props(props) }} {{ class_prop(class_names) }} aria-label="Page navigation" role="navigation">
	{% apply spaceless %}
	<ul class="{{root_class_name}}">
		{% if current_page != 1 %}
			<li class="{{root_class_name}}__item">
				<a href="#" class="Button Button--secondary Button--square">
					<svg width="24" height="24" aria-hidden="true">
						<use xlink:href="/icons/svg/sprite.svg#chevron-right"/>
					</svg>
					<span class="accessibility-hidden">Previous</span>
				</a>
			</li>
		{% endif %}

		{% for page in range(start_page, end_page + 1) %}
			{% if page == current_page %}
				<li class="{{root_class_name}}__item">
					<a href="#" class="{{root_class_name}}__link {{root_class_name}}__link--current" aria-label="Current Page, Page {{ page }}" aria-current="page">
						<span class="accessibility-hidden">page</span>
						{{ page }}
					</a>
				</li>
			{% else %}
				{% if page > current_page - chapter_size and page < current_page + chapter_size %}
					<li class="{{root_class_name}}__item">
						<a href="#" class="{{root_class_name}}__link" aria-label="Goto Page {{ page }}" aria-current="false">
							<span class="accessibility-hidden">page</span>
							{{ page }}
						</a>
					</li>
				{% endif %}
			{% endif %}
		{% endfor %}

		{% if current_page != total_pages %}
			<li class="{{root_class_name}}__item">
				<a href="#" class="Button Button--secondary Button--square">
					<svg width="24" height="24" aria-hidden="true">
						<use xlink:href="/icons/svg/sprite.svg#chevron-right"/>
					</svg>
					<span class="accessibility-hidden">Next</span>
				</a>
			</li>
		{% endif %}
	</ul>
	{% endapply %}</{{element_type}}>
