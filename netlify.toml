# https://docs.netlify.com/configure-builds/file-based-configuration/
# Settings in the [build] context are global and are applied to
# all contexts unless otherwise overridden by more specific contexts.
[build]

  # Directory that contains the deploy-ready HTML files and
  # assets generated by the build. This is relative to the base
  # directory if one has been set, or the root directory if
  # a base has not been set. This sample publishes the directory
  # located at the absolute path "root/project/build-output"

  publish = ".storybook/build"

  # Default build command.
  command = """\
    yarn lerna run --scope @lmc-eu/spirit-icons build --skip-nx-cache \
    && yarn storybook:build \
    """

  # Ignore builds on Netlify
  ignore = "node ./scripts/ignoreNetlifyBuilds.js"

[context.deploy-preview]
  # Deploy preview only if there are changes in some directories
  ignore = """\
    git diff --quiet $CACHED_COMMIT_REF $COMMIT_REF \
    ./packages/web-react/src/ \
    .storybook/ \
    ./packages/web-react/docs/stories/ \
    """
