{
  "name": "Spirit Design System",
  "image": "node:20-bookworm",

  "features": {
    "ghcr.io/devcontainers/features/github-cli:1": {}
  },

  "postCreateCommand": "corepack enable && corepack install && yarn install && npx playwright install --with-deps chromium",
  "postStartCommand": "git config --global --add safe.directory ${containerWorkspaceFolder}",

  "appPort": ["3456:3456", "6006:6006", "9323:9323"],
  "forwardPorts": [3456, 6006, 9323],
  "portsAttributes": {
    "3456": {
      "label": "Vite Dev Server"
    },
    "6006": {
      "label": "Storybook"
    },
    "9323": {
      "label": "Playwright UI"
    }
  },

  "mounts": [
    "source=${localWorkspaceFolderBasename}-node_modules,target=${containerWorkspaceFolder}/node_modules,type=volume",
    "source=${localWorkspaceFolderBasename}-yarn-cache,target=/home/node/.yarn/berry/cache,type=volume"
  ],

  "remoteEnv": {
    "ANTHROPIC_API_KEY": "${localEnv:ANTHROPIC_API_KEY}",
    "OPENAI_API_KEY": "${localEnv:OPENAI_API_KEY}"
  }
}
